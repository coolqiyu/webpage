<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>3D旋转</title>
	<style type="text/css">
		#cuba{
			width: 100px;
			height: 100px;
			margin: 200px;
			position: relative;
			transform-style: preserve-3d;
			transform: rotateY(-45deg);
			/*perspective: 2000px;*/
			/*animation: rotateCuba 10s infinite;*/
		}
		@keyframes rotateCuba{
			25%{
				transform: rotateY(180deg);
			}
			50%{
				transform: rotateY(360deg);
			}
			75%{
				transform: rotateX(180deg);
			}
			100%{
				transform: rotateX(360deg);
			}
		}
		#cuba div{
			width: 200px;
			height: 100px;
			position: absolute;
		}
		#cuba #front{
			background: red;
			transform: translateZ(50px);
		}
		#cuba #back{
			background: blue;
			transform: translateZ(-50px);
		}
		#cuba #left{
			width: 100px;
			background: green;
			transform: rotateY(-90deg) translateZ(50px);
		}
		#cuba #right{
			width: 100px;
			background: purple;
			transform: rotateY(90deg) translateZ(150px);
		}
		#cuba #top{
			background: yellow;
			transform: rotateX(90deg) translateZ(50px);
		}
		#cuba #bottom{
			background: black;
			transform: rotateX(-90deg) translateZ(50px);
		}
		#love{
			width: 200px;
			height: 260px;
			position: relative;
			margin: 100px auto;
			transform-style: preserve-3d;
			/*不设置perspective，这样就不会有近大远小的效果*/
			/*perspective: 1000px;*/
			animation: loveFrame 10s infinite linear;
		}
		@keyframes loveFrame{
			100%{
				transform: rotateY(360deg);
			}
		}
		#love div{
			width: 200px;
			height: 260px;
			position: absolute;
			border: solid red;			
			/*设置圆角，且通过width来只显示border的一部分*/
			border-width: 2px 2px 0 0;
			border-radius: 50% 50% 0/ 40% 50% 0;
			box-sizing: border-box;
			overflow: hidden;
		}
	</style>
</head>
<body>
	<div id = "cuba">
		<div id = 'front'></div>
		<div id = 'back'></div>
		<div id = 'left'></div>
		<div id = 'right'></div>
		<div id = 'top'></div>
		<div id = 'bottom'></div> 
	</div>
	<div id = 'love'>
	<!-- <div>
	</div> -->
	</div>
	<script type="text/javascript">
		var cuba = document.getElementById('cuba');
		var oxDeg = 0, oyDeg = 0;
		document.onmousedown = function(e){
			var oX = e.clientX;
			var oY = e.clientY;
			console.log('down');
			document.onmousemove = function(e){
				var newX = e.clientX;
				var newY = e.clientY;
				console.log('move1');
				var yDeg = (newY - oY) / cuba.clientHeight * 360;
				var xDeg = (newX - oX) / cuba.clientWidth * 360;
				console.log('move2');
				oX = newX;
				oY = newY;
				oxDeg += xDeg;
				oyDeg += yDeg;
				console.log('move3');
				cuba.style.transform = "rotateX(" + oyDeg + "deg) rotateY(" + oxDeg + "deg)";
				console.log('move4');					
			}			
			//这个放置的位置还是有讲究的
			document.onmouseup = function(){
				console.log('up');
				document.onmousemove = null;
				document.onmouseup = null;
			}
		}


		/*3D爱心*/
		//创建一系列边线
		var love = document.getElementById('love');
		// var loveSide = document.querySelector('#love div');
		var interval = 10;
		var cnt = 360 / interval;
		for(var i = 0; i < cnt; i++){
			/*生成多个div，每个div有不同的transform*/
			/*方法1：添加node，获取transform的值，通过transform，但是transform的值是matrix，设置不方便*/
			// var side = loveSide.cloneNode(true);
			// var str = " rotateY(" + i * interval + "deg)";
			// var s = getComputedStyle(loveSide).transform;
			// side.style.transform = s + str;
			// love.appendChild(side);

			/*方法2： 用innerHTML，把style直接写在<><>里面*/
			/*先绕y轴，再绕z轴*/
			var html = "<div style = \'transform: rotateY(" + i * interval + "deg) rotateZ(52deg) translateX(66px)\'></div>";
			love.innerHTML += html;
		}
	</script>
</body>
</html>